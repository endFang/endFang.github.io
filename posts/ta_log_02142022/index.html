<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>TA Log 02142022 | After1995</title>
<meta name=keywords content="shader,unity,VFX">
<meta name=description content="Unity Settings source: https://forum.unity.com/threads/warning-to-all-my-friends-beware-optimise-mesh-data.544735/
Optimize Mesh Data will strip unused in mesh component. If the project only instantiate mesh during runtimes, Unity might delete some components in the build, such as lightmap uv.
Unity Shader Erosion
The most basic erosion (or dissolve) is the alpha clipping method. To soft the erosion, we can instead use a float to convert the noise between 0 and 1, and use the result as alpha.">
<meta name=author content="Kyle Fang">
<link rel=canonical href=https://endfang.github.io/posts/ta_log_02142022/>
<meta name=google-site-verification content="XYZabc">
<meta name=yandex-verification content="XYZabc">
<meta name=msvalidate.01 content="XYZabc">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.9f1d947375927e9847272b1f4e9be81336f539e513bf04d52cade31f81cad1af.css integrity="sha256-nx2Uc3WSfphHJysfTpvoEzb1OeUTvwTVLK3jH4HK0a8=" rel="preload stylesheet" as=style>
<link rel=preload href=/apple-touch-icon.png as=image>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://endfang.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://endfang.github.io/favicon-16x16.ico>
<link rel=icon type=image/png sizes=32x32 href=https://endfang.github.io/favicon-32x32.ico>
<link rel=apple-touch-icon href=https://endfang.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://endfang.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.88.1">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><meta property="og:title" content="TA Log 02142022">
<meta property="og:description" content="Unity Settings source: https://forum.unity.com/threads/warning-to-all-my-friends-beware-optimise-mesh-data.544735/
Optimize Mesh Data will strip unused in mesh component. If the project only instantiate mesh during runtimes, Unity might delete some components in the build, such as lightmap uv.
Unity Shader Erosion
The most basic erosion (or dissolve) is the alpha clipping method. To soft the erosion, we can instead use a float to convert the noise between 0 and 1, and use the result as alpha.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://endfang.github.io/posts/ta_log_02142022/"><meta property="og:image" content="https://endfang.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-02-14T16:53:04+08:00">
<meta property="article:modified_time" content="2022-02-14T16:53:04+08:00"><meta property="og:site_name" content="After1995">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://endfang.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E">
<meta name=twitter:title content="TA Log 02142022">
<meta name=twitter:description content="Unity Settings source: https://forum.unity.com/threads/warning-to-all-my-friends-beware-optimise-mesh-data.544735/
Optimize Mesh Data will strip unused in mesh component. If the project only instantiate mesh during runtimes, Unity might delete some components in the build, such as lightmap uv.
Unity Shader Erosion
The most basic erosion (or dissolve) is the alpha clipping method. To soft the erosion, we can instead use a float to convert the noise between 0 and 1, and use the result as alpha.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://endfang.github.io/posts/"},{"@type":"ListItem","position":3,"name":"TA Log 02142022","item":"https://endfang.github.io/posts/ta_log_02142022/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"TA Log 02142022","name":"TA Log 02142022","description":"Unity Settings source: https://forum.unity.com/threads/warning-to-all-my-friends-beware-optimise-mesh-data.544735/\nOptimize Mesh Data will strip unused in mesh component. If the project only instantiate mesh during runtimes, Unity might delete some components in the build, such as lightmap uv.\nUnity Shader Erosion\nThe most basic erosion (or dissolve) is the alpha clipping method. To soft the erosion, we can instead use a float to convert the noise between 0 and 1, and use the result as alpha.","keywords":["shader","unity","VFX"],"articleBody":"Unity Settings source: https://forum.unity.com/threads/warning-to-all-my-friends-beware-optimise-mesh-data.544735/\nOptimize Mesh Data will strip unused in mesh component. If the project only instantiate mesh during runtimes, Unity might delete some components in the build, such as lightmap uv.\nUnity Shader Erosion\nThe most basic erosion (or dissolve) is the alpha clipping method. To soft the erosion, we can instead use a float to convert the noise between 0 and 1, and use the result as alpha. Twitter\nFlat Shading\nTo ensure the triangle is flat, we can not use the normal vector provided by the mesh. We can calculate the normal in the fragment shader by using the rate of change of the world position. ddx and ddy return the approximated derivative in screen space horizontal and vertical coordinates.\nfloat3 dpdx = ddx(positionWS); float3 dpdy = ddy(positionWS); float3 normal = normalize(cross(dpdy, dpdx)); Another way is to use geometry shader to calculate the normal of three vertices, and update the normal.\n[maxvertexcount(3)] void geo(triangle Varyings input[3], inout TriangleStreamVaryings stream) { float3 p0 = input[0].positionWS.xyz; float3 p1 = input[1].positionWS.xyz; float3 p2 = input[2].positionWS.xyz; float3 triangleNormal = normalize(cross(p1 - p0, p2 - p0)); input[0].normalWS = triangleNormal; input[1].normalWS = triangleNormal; input[2].normalWS = triangleNormal; stream.Append(input[0]); stream.Append(input[1]); stream.Append(input[2]); } Wireframe Shading\nBarycentric coordinates In a triangle, the minimum value of a barycentric coordinates is the minimum distance of a point to the edge. If we use the minimum value as color, we can see triangles outlines. The value will be 0 at the edge and 1/3 at the center. We can use smoothstep to smooth the value to draw finer outlines.\n[maxvertexcount(3)] void geo(triangle Varyings input[3], inout TriangleStreamInterpolatorsGeometry stream) { float3 p0 = input[0].positionWS.xyz; float3 p1 = input[1].positionWS.xyz; float3 p2 = input[2].positionWS.xyz; float3 triangleNormal = normalize(cross(p1 - p0, p2 - p0)); input[0].normalWS = triangleNormal; input[1].normalWS = triangleNormal; input[2].normalWS = triangleNormal; InterpolatorsGeometry g0, g1, g2; g0.data = input[0]; g1.data = input[1]; g2.data = input[2]; g0.barycentricCoordinates = float2(1,0); // barycentric coordinates adds up to 1, so vector2 is enough g1.barycentricCoordinates = float2(0,1); g2.barycentricCoordinates = float2(0,0); stream.Append(g0); stream.Append(g1); stream.Append(g2); } Awesome VFX Speed Distortion: https://twitter.com/andre_mc/status/1484246279567949824?ref_src=twsrc^tfw|twcamp^tweetembed|twterm^1484246279567949824|twgr^|twcon^s1_\u0026ref_url=https%3A%2F%2Fhalisavakis.com%2Ftechnically-art-issue-121-11-02-2022%2F\nWhispy Boom: https://twitter.com/simonschreibt/status/1487863546893451269?ref_src=twsrc^tfw|twcamp^tweetembed|twterm^1487863546893451269|twgr^|twcon^s1_\u0026ref_url=https%3A%2F%2Fhalisavakis.com%2Ftechnically-art-issue-121-11-02-2022%2F\nUE4 Lighting Sphere Effect: https://twitter.com/NotSoLittleC/status/1490424757325639680?ref_src=twsrc^tfw|twcamp^tweetembed|twterm^1490424757325639680|twgr^|twcon^s1_\u0026ref_url=https%3A%2F%2Fhalisavakis.com%2Ftechnically-art-issue-121-11-02-2022%2F\nHyper Foliage: https://assetstore.unity.com/packages/vfx/shaders/hyper-foliage-208353\n","wordCount":"352","inLanguage":"en","datePublished":"2022-02-14T16:53:04+08:00","dateModified":"2022-02-14T16:53:04+08:00","author":{"@type":"Person","name":"Kyle Fang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://endfang.github.io/posts/ta_log_02142022/"},"publisher":{"@type":"Organization","name":"After1995","logo":{"@type":"ImageObject","url":"https://endfang.github.io/favicon.ico"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://endfang.github.io accesskey=h title="After1995 (Alt + H)">
<img src=/apple-touch-icon.png alt=logo aria-label=logo height=35>After1995</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://endfang.github.io/archives/ title=archives>
<span>archives</span>
</a>
</li>
<li>
<a href=https://endfang.github.io/categories/ title=categories>
<span>categories</span>
</a>
</li>
<li>
<a href=https://endfang.github.io/tags/ title=tags>
<span>tags</span>
</a>
</li>
<li>
<a href=https://endfang.github.io/about/ title=about>
<span>about</span>
</a>
</li>
<li>
<a href=https://endfang.github.io/search/ title="search (Alt + /)" accesskey=/>
<span>search</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://endfang.github.io>Home</a>&nbsp;»&nbsp;<a href=https://endfang.github.io/posts/>Posts</a></div>
<h1 class=post-title>
TA Log 02142022
</h1>
<div class=post-meta>February 14, 2022&nbsp;·&nbsp;Kyle Fang
</div>
</header> <div class=toc>
<details open>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#unity-settings aria-label="Unity Settings">Unity Settings</a></li>
<li>
<a href=#unity-shader aria-label="Unity Shader">Unity Shader</a></li>
<li>
<a href=#awesome-vfx aria-label="Awesome VFX">Awesome VFX</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><h1 id=unity-settings>Unity Settings<a hidden class=anchor aria-hidden=true href=#unity-settings>#</a></h1>
<p>source: <a href=https://forum.unity.com/threads/warning-to-all-my-friends-beware-optimise-mesh-data.544735/>https://forum.unity.com/threads/warning-to-all-my-friends-beware-optimise-mesh-data.544735/</a></p>
<p>Optimize Mesh Data will strip unused in mesh component. If the project only instantiate mesh during runtimes, Unity might delete some components in the build, such as lightmap uv.</p>
<h1 id=unity-shader>Unity Shader<a hidden class=anchor aria-hidden=true href=#unity-shader>#</a></h1>
<p><strong>Erosion</strong></p>
<p>The most basic erosion (or dissolve) is the alpha clipping method. To soft the erosion, we can instead use a float to convert the noise between 0 and 1, and use the result as alpha. <a href="https://twitter.com/matt_ostertag/status/1488489875766661122?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E1488489875766661122%7Ctwgr%5E%7Ctwcon%5Es1_&ref_url=https%3A%2F%2Fhalisavakis.com%2Ftechnically-art-issue-121-11-02-2022%2F">Twitter</a></p>
<p><strong>Flat Shading</strong></p>
<p>To ensure the triangle is flat, we can not use the normal vector provided by the mesh. We can calculate the normal in the fragment shader by using the rate of change of the world position. <code>ddx</code> and <code>ddy</code> return the approximated derivative in screen space horizontal and vertical coordinates.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-glsl data-lang=glsl>float3 dpdx <span style=color:#f92672>=</span> ddx(positionWS);
float3 dpdy <span style=color:#f92672>=</span> ddy(positionWS);
float3 normal <span style=color:#f92672>=</span> normalize(cross(dpdy, dpdx));
</code></pre></div><p>Another way is to use geometry shader to calculate the normal of three vertices, and update the normal.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-glsl data-lang=glsl>[maxvertexcount(<span style=color:#ae81ff>3</span>)]
<span style=color:#66d9ef>void</span> geo(triangle Varyings <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>3</span>], <span style=color:#66d9ef>inout</span> TriangleStream<span style=color:#f92672>&lt;</span>Varyings<span style=color:#f92672>&gt;</span> stream)
{
    float3 p0 <span style=color:#f92672>=</span> <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>0</span>].positionWS.xyz;
    float3 p1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>1</span>].positionWS.xyz;
    float3 p2 <span style=color:#f92672>=</span> <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>2</span>].positionWS.xyz;

    float3 triangleNormal <span style=color:#f92672>=</span> normalize(cross(p1 <span style=color:#f92672>-</span> p0, p2 <span style=color:#f92672>-</span> p0));
    
    <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>0</span>].normalWS <span style=color:#f92672>=</span> triangleNormal;
    <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>1</span>].normalWS <span style=color:#f92672>=</span> triangleNormal;
    <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>2</span>].normalWS <span style=color:#f92672>=</span> triangleNormal;
    
    stream.Append(<span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>0</span>]);
    stream.Append(<span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>1</span>]);
    stream.Append(<span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>2</span>]);
}
</code></pre></div><p><img loading=lazy src=https://i.imgur.com/h90qY1J.png alt=wireframe>
</p>
<p><strong>Wireframe Shading</strong></p>
<p><a href=https://mathworld.wolfram.com/BarycentricCoordinates.html>Barycentric coordinates</a> In a triangle, the minimum value of a barycentric coordinates is the minimum distance of a point to the edge. If we use the minimum value as color, we can see triangles outlines. The value will be 0 at the edge and 1/3 at the center. We can use <code>smoothstep</code> to smooth the value to draw finer outlines.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-glsl data-lang=glsl>[maxvertexcount(<span style=color:#ae81ff>3</span>)]
<span style=color:#66d9ef>void</span> geo(triangle Varyings <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>3</span>], <span style=color:#66d9ef>inout</span> TriangleStream<span style=color:#f92672>&lt;</span>InterpolatorsGeometry<span style=color:#f92672>&gt;</span> stream)
{
    float3 p0 <span style=color:#f92672>=</span> <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>0</span>].positionWS.xyz;
    float3 p1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>1</span>].positionWS.xyz;
    float3 p2 <span style=color:#f92672>=</span> <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>2</span>].positionWS.xyz;

    float3 triangleNormal <span style=color:#f92672>=</span> normalize(cross(p1 <span style=color:#f92672>-</span> p0, p2 <span style=color:#f92672>-</span> p0));
    
    <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>0</span>].normalWS <span style=color:#f92672>=</span> triangleNormal;
    <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>1</span>].normalWS <span style=color:#f92672>=</span> triangleNormal;
    <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>2</span>].normalWS <span style=color:#f92672>=</span> triangleNormal;

    InterpolatorsGeometry g0, g1, g2;
    g0.data <span style=color:#f92672>=</span> <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>0</span>];
    g1.data <span style=color:#f92672>=</span> <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>1</span>];
    g2.data <span style=color:#f92672>=</span> <span style=color:#66d9ef>input</span>[<span style=color:#ae81ff>2</span>];

    g0.barycentricCoordinates <span style=color:#f92672>=</span> float2(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>0</span>); <span style=color:#75715e>// barycentric coordinates adds up to 1, so vector2 is enough</span>
    g1.barycentricCoordinates <span style=color:#f92672>=</span> float2(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>);
    g2.barycentricCoordinates <span style=color:#f92672>=</span> float2(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>);
    
    stream.Append(g0);
    stream.Append(g1);
    stream.Append(g2);
}
</code></pre></div><h1 id=awesome-vfx>Awesome VFX<a hidden class=anchor aria-hidden=true href=#awesome-vfx>#</a></h1>
<p>Speed Distortion: <a href="https://twitter.com/andre_mc/status/1484246279567949824?ref_src=twsrc%5Etfw">https://twitter.com/andre_mc/status/1484246279567949824?ref_src=twsrc^tfw</a>|twcamp^tweetembed|twterm^1484246279567949824|twgr^|twcon^s1_&ref_url=https%3A%2F%2Fhalisavakis.com%2Ftechnically-art-issue-121-11-02-2022%2F</p>
<p>Whispy Boom: <a href="https://twitter.com/simonschreibt/status/1487863546893451269?ref_src=twsrc%5Etfw">https://twitter.com/simonschreibt/status/1487863546893451269?ref_src=twsrc^tfw</a>|twcamp^tweetembed|twterm^1487863546893451269|twgr^|twcon^s1_&ref_url=https%3A%2F%2Fhalisavakis.com%2Ftechnically-art-issue-121-11-02-2022%2F</p>
<p>UE4 Lighting Sphere Effect: <a href="https://twitter.com/NotSoLittleC/status/1490424757325639680?ref_src=twsrc%5Etfw">https://twitter.com/NotSoLittleC/status/1490424757325639680?ref_src=twsrc^tfw</a>|twcamp^tweetembed|twterm^1490424757325639680|twgr^|twcon^s1_&ref_url=https%3A%2F%2Fhalisavakis.com%2Ftechnically-art-issue-121-11-02-2022%2F</p>
<p>Hyper Foliage: <a href=https://assetstore.unity.com/packages/vfx/shaders/hyper-foliage-208353>https://assetstore.unity.com/packages/vfx/shaders/hyper-foliage-208353</a></p>
</div>
<footer class=post-footer>
<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/>
<img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-nc/4.0/88x31.png>
</a><p style=font-size:small>This work is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/>Creative Commons Attribution-NonCommercial 4.0 International License</a>.</p>
<br>
<ul class=post-tags>
<li><a href=https://endfang.github.io/tags/shader/>Shader</a></li>
<li><a href=https://endfang.github.io/tags/unity/>Unity</a></li>
<li><a href=https://endfang.github.io/tags/vfx/>VFX</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://endfang.github.io/posts/ta_log_02212022/>
<span class=title>« Prev Page</span>
<br>
<span>TA Log 02212022</span>
</a>
<a class=next href=https://endfang.github.io/posts/ta_log_01242022/>
<span class=title>Next Page »</span>
<br>
<span>TA Log 01242022</span>
</a>
</nav>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=https://endfang.github.io>After1995</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>